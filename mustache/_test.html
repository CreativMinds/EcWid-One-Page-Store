<!DOCTYPE html>
<html>
<head>
<script src="//code.jquery.com/jquery-1.9.1.min.js"></script>
<script src="mustache.js"></script>
  <meta charset="utf-8">
  <title>Templating</title>
</head>
<body>

<div id="target">123</div>

<div id=template style="display:none;">

	{{#options}}
	
	<div>
	
		<b>{{type}}, {{{show}}}</b> <br />
		
		{{#choices}}
			<b>{{name}}</b>
		{{/choices}}
	
	</div>
		
	{{/options}}

</div>

<div id=selectTemplate style="display:none;">
	<select>
		{{#choices}}
			<option>{{name}}</option>
		{{/choices}}		
	</select>
</div>  
  
  
  <script>

	var template = $('#template').html();
	var selectTemplate = $('#selectTemplate').html();
	
	var options = [{
		type: "SELECT",
		choices: [{name: "softcover"},{name: "hardcover"}],
		show: function(){
			
			return Mustache.render('{{>'+this.type+'}}', this, {SELECT: selectTemplate});
		}
	},
	{
		type: "radio",
		choices: [{name: "softcover"},{name: "hardcover"}],
		show: function(){
			return Mustache.render('{{'+this.type+'}}', this);
		}		
	}	
	];
	
	
	var rendered = Mustache.render(template, {options: options});
	$('#target').html(rendered);


  
  </script>

</body>
</html>